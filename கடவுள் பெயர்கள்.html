<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>காணியாளய்யன் திருக்கோவில் (பைரவர் கூட்டம்) - கடவுள் பெயர்கள்</title>
  
  <!-- Bootstrap 4 -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Google Fonts for Tamil -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Tamil:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    /* Custom Tamil Font */
    .tamil {
      font-family: 'Noto Sans Tamil', sans-serif;
    }
    
    /* Header Styles */
    .temple-header {
      background: linear-gradient(135deg, #ff9933, #ffcc66);
      padding: 25px 0;
      position: relative;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    
    .temple-header::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text x="50" y="50" font-size="80" text-anchor="middle" dominant-baseline="middle" fill="rgba(255,255,255,0.1)">ॐ</text></svg>');
      background-size: 150px;
      opacity: 0.3;
    }
    
    .temple-title {
      font-size: 2.2rem;
      font-weight: 700;
      color: #8B0000;
      text-align: center;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 1;
    }
    
    .temple-subtitle {
      font-size: 1.1rem;
      color: #333;
      text-align: center;
      font-weight: 500;
      position: relative;
      z-index: 1;
    }
    
    /* Navigation */
    .temple-nav {
      background: linear-gradient(135deg, #8B0000, #A52A2A) !important;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    .nav-link {
      color: #fff !important;
      font-weight: 500;
      padding: 15px 20px !important;
      position: relative;
      transition: all 0.3s ease;
      border-right: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .nav-link:hover {
      background: rgba(255, 255, 255, 0.1);
      color: #FFD700 !important;
    }
    
    .nav-link.active {
      background: rgba(255, 255, 255, 0.15);
      color: #FFD700 !important;
    }
    
    /* Main Content */
    .main-content {
      padding: 30px 0;
      background: #FFF8E7;
      min-height: 70vh;
    }
    
    /* Page Title Section */
    .page-title-section {
      text-align: center;
      margin-bottom: 40px;
      padding: 20px;
      background: linear-gradient(135deg, rgba(139, 0, 0, 0.1), rgba(255, 153, 51, 0.1));
      border-radius: 15px;
      border-left: 5px solid #8B0000;
      border-right: 5px solid #FF9933;
    }
    
    .page-title {
      color: #8B0000;
      font-size: 2rem;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
    }
    
    .page-title i {
      color: #FF9933;
      font-size: 1.8rem;
    }
    
    /* Secret Admin Login */
    .secret-login {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .secret-btn {
      background: linear-gradient(135deg, #8B0000, #A52A2A);
      color: white;
      border: none;
      padding: 8px 20px;
      border-radius: 20px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin: 0 auto;
    }
    
    .secret-btn:hover {
      background: linear-gradient(135deg, #A52A2A, #8B0000);
      transform: translateY(-2px);
    }
    
    .secret-input {
      width: 200px;
      padding: 8px 15px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 1rem;
      margin: 0 10px;
      text-align: center;
    }
    
    .secret-input:focus {
      border-color: #8B0000;
      outline: none;
    }
    
    /* Admin Panel */
    .admin-panel {
      background: white;
      border-radius: 10px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      border: 2px solid #8B0000;
      display: none;
    }
    
    .admin-title {
      color: #8B0000;
      font-size: 1.5rem;
      margin-bottom: 20px;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    .upload-form {
      max-width: 600px;
      margin: 0 auto;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-label {
      color: #8B0000;
      font-weight: 600;
      margin-bottom: 8px;
      display: block;
    }
    
    .form-input {
      width: 100%;
      padding: 10px 15px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.3s ease;
    }
    
    .form-input:focus {
      border-color: #8B0000;
      outline: none;
    }
    
    .file-upload-container {
      border: 2px dashed #8B0000;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      background: #FFF8E7;
    }
    
    .file-upload-container:hover {
      background: #FFEBCD;
    }
    
    .file-upload-label {
      display: block;
      cursor: pointer;
    }
    
    .upload-icon {
      font-size: 2.5rem;
      color: #8B0000;
      margin-bottom: 10px;
    }
    
    .file-input {
      display: none;
    }
    
    .preview-container {
      margin-top: 15px;
      text-align: center;
    }
    
    .image-preview {
      max-width: 200px;
      max-height: 150px;
      border-radius: 8px;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
      display: none;
    }
    
    .upload-btn {
      background: linear-gradient(135deg, #FF9933, #FFCC66);
      color: #8B0000;
      border: none;
      padding: 12px 30px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
      margin-top: 20px;
    }
    
    .upload-btn:hover:not(:disabled) {
      background: linear-gradient(135deg, #FFCC66, #FF9933);
      transform: translateY(-2px);
    }
    
    .upload-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .admin-controls {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 20px;
    }
    
    .control-btn {
      padding: 8px 20px;
      border-radius: 20px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid #8B0000;
      background: white;
      color: #8B0000;
    }
    
    .control-btn:hover {
      background: #8B0000;
      color: white;
    }
    
    /* Pagination Controls */
    .pagination-controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin: 30px 0;
      flex-wrap: wrap;
    }
    
    .page-btn {
      background: white;
      border: 2px solid #8B0000;
      color: #8B0000;
      padding: 8px 20px;
      border-radius: 20px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 120px;
    }
    
    .page-btn:hover:not(:disabled) {
      background: #8B0000;
      color: white;
    }
    
    .page-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .page-info {
      color: #8B0000;
      font-weight: 600;
      font-size: 1.1rem;
    }
    
    /* Simple Gods Grid */
    .simple-gods-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 25px;
      margin-bottom: 40px;
    }
    
    .simple-god-card {
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
      border-top: 5px solid #FF9933;
      position: relative;
    }
    
    .simple-god-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }
    
    .god-image-simple {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }
    
    .god-info-simple {
      padding: 20px;
      text-align: center;
    }
    
    .god-name-simple {
      color: #8B0000;
      font-size: 1.4rem;
      font-weight: 700;
      margin-bottom: 8px;
    }
    
    .god-type-simple {
      color: #FF9933;
      font-size: 1rem;
      margin-bottom: 15px;
      font-weight: 500;
    }
    
    .info-btn {
      background: linear-gradient(135deg, #8B0000, #A52A2A);
      color: white;
      border: none;
      padding: 8px 20px;
      border-radius: 20px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }
    
    .info-btn:hover {
      background: linear-gradient(135deg, #A52A2A, #8B0000);
      transform: translateY(-2px);
    }
    
    /* Delete Button on Image (Admin Only) */
    .delete-overlay {
      position: absolute;
      top: 10px;
      right: 10px;
      display: none;
      z-index: 10;
    }
    
    .delete-btn {
      background: linear-gradient(135deg, #dc3545, #c82333);
      color: white;
      border: none;
      width: 35px;
      height: 35px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
    }
    
    .delete-btn:hover {
      background: linear-gradient(135deg, #c82333, #dc3545);
      transform: scale(1.1);
    }
    
    /* Simple Modal */
    .simple-modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      animation: fadeIn 0.3s ease;
    }
    
    .simple-modal-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 30px;
      border-radius: 15px;
      width: 90%;
      max-width: 500px;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid #FF9933;
    }
    
    .modal-title {
      color: #8B0000;
      font-size: 1.5rem;
      font-weight: 700;
      margin: 0;
    }
    
    .close-modal {
      color: #8B0000;
      font-size: 30px;
      font-weight: bold;
      cursor: pointer;
      background: none;
      border: none;
      padding: 0;
      line-height: 1;
    }
    
    .close-modal:hover {
      color: #FF9933;
    }
    
    .modal-body {
      color: #333;
      line-height: 1.6;
      font-size: 1.1rem;
    }
    
    .modal-footer {
      margin-top: 20px;
      padding-top: 15px;
      border-top: 1px solid #eee;
      text-align: center;
    }
    
    /* Quick Links */
    .quick-links-section {
      background: white;
      border-radius: 10px;
      padding: 25px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
      margin-top: 30px;
    }
    
    .links-title {
      color: #8B0000;
      font-size: 1.5rem;
      margin-bottom: 20px;
      text-align: center;
    }
    
    .quick-links-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }
    
    .quick-link-item {
      background: #F8F9FA;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      transition: all 0.3s ease;
      border: 1px solid #E9ECEF;
      text-decoration: none;
      color: #333;
    }
    
    .quick-link-item:hover {
      background: #E9ECEF;
      transform: translateY(-3px);
      border-color: #8B0000;
      text-decoration: none;
      color: #8B0000;
    }
    
    .quick-link-item i {
      color: #8B0000;
      font-size: 1.8rem;
      margin-bottom: 10px;
      display: block;
    }
    
    /* Footer */
    .temple-footer {
      background: linear-gradient(135deg, #2F4F4F, #363636);
      color: white;
      padding: 40px 0 20px;
      margin-top: 40px;
    }
    
    .footer-section {
      margin-bottom: 25px;
    }
    
    .footer-title {
      color: #FFD700;
      font-size: 1.3rem;
      margin-bottom: 15px;
      font-weight: 600;
      padding-bottom: 10px;
      border-bottom: 2px solid #FFD700;
    }
    
    .footer-links {
      list-style: none;
      padding: 0;
    }
    
    .footer-links li {
      margin-bottom: 10px;
    }
    
    .footer-links a {
      color: #ddd;
      text-decoration: none;
      transition: color 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .footer-links a:hover {
      color: #FFD700;
    }
    
    .copyright {
      text-align: center;
      padding-top: 20px;
      margin-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      color: #aaa;
      font-size: 0.9rem;
    }
    
    /* Animation */
    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }
    
    /* Responsive Design */
    @media (max-width: 992px) {
      .temple-title {
        font-size: 1.8rem;
      }
      
      .nav-link {
        padding: 12px 15px !important;
      }
      
      .page-title {
        font-size: 1.8rem;
      }
      
      .simple-gods-grid {
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      }
    }
    
    @media (max-width: 768px) {
      .temple-title {
        font-size: 1.6rem;
      }
      
      .temple-subtitle {
        font-size: 1rem;
      }
      
      .page-title {
        font-size: 1.6rem;
        flex-direction: column;
        gap: 10px;
      }
      
      .simple-gods-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .quick-links-grid {
        grid-template-columns: 1fr;
      }
      
      .pagination-controls {
        flex-direction: column;
        gap: 10px;
      }
    }
    
    @media (max-width: 576px) {
      .temple-header {
        padding: 20px 0;
      }
      
      .temple-title {
        font-size: 1.4rem;
      }
      
      .temple-subtitle {
        font-size: 0.9rem;
      }
      
      .page-title {
        font-size: 1.4rem;
      }
      
      .simple-gods-grid {
        grid-template-columns: 1fr;
      }
      
      .quick-links-section {
        padding: 20px;
      }
      
      .simple-modal-content {
        padding: 20px;
        width: 95%;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="temple-header">
    <div class="container">
      <div class="text-center">
        <h1 class="temple-title tamil">காணியாளய்யன் திருக்கோவில்</h1>
        <p class="temple-subtitle tamil">பைரவர் கூட்டம் • ஸ்ரீ காணியாளய்யன் ஆலயம்</p>
      </div>
    </div>
  </header>

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg temple-nav navbar-dark">
    <div class="container">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTemple">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarTemple">
        <ul class="navbar-nav mx-auto">
          <li class="nav-item">
            <a class="nav-link tamil" href="index.html">
              <i class="fas fa-home me-2"></i>முகப்பு
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link tamil" href="history.html">
              <i class="fas fa-history me-2"></i>கோவில் வரலாறு
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link active tamil" href="god_names.html">
              <i class="fas fa-pray me-2"></i>கடவுள் பெயர்கள்
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link tamil" href="புகைப்பட தொகுப்பு.html">
              <i class="fas fa-images me-2"></i>புகைப்பட தொகுப்பு
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link tamil" href="நிர்வாகிகள்.html">
              <i class="fas fa-users me-2"></i>நிர்வாகிகள்
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link tamil" href="நிலம் அன்பளிப்பாளர்கள்.html">
              <i class="fas fa-hands-helping me-2"></i>நிலம் அன்பளிப்பாளர்கள்
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link tamil" href="அமாவாசை கட்டளைதாரர்கள்.html">
              <i class="fas fa-calendar me-2"></i>அமாவாசை கட்டளைதாரர்கள்
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link tamil" href="விஷேசநாட்கள்.html">
              <i class="fas fa-star me-2"></i>விஷேசநாட்கள்
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <div class="container">
      <!-- Page Title -->
      <div class="page-title-section">
        <h2 class="page-title tamil">
          <i class="fas fa-praying-hands"></i>
          கடவுள் பெயர்கள்
          <i class="fas fa-om"></i>
        </h2>
        <p class="tamil">கோவிலில் உள்ள கடவுள்களின் பெயர்கள். கடவுளின் படத்தை கிளிக் செய்து விவரங்களைப் பார்க்கவும்.</p>
      </div>
      
      <!-- Secret Admin Login -->
      <div class="secret-login" id="secretLogin">
        <button class="secret-btn tamil" onclick="showSecretInput()">
          <i class="fas fa-key"></i>
          நிர்வாகிகள் கடவுள் சேர்க்க
        </button>
        <div id="secretInputContainer" style="display: none; margin-top: 15px;">
          <input type="password" id="secretKey" class="secret-input" placeholder="சிறப்பு குறியை உள்ளிடுக">
          <button class="secret-btn tamil" onclick="checkSecretKey()">
            <i class="fas fa-lock-open"></i>
            உள்ளிடு
          </button>
        </div>
      </div>
      
      <!-- Admin Panel (Hidden by default) -->
      <div class="admin-panel" id="adminPanel">
        <h3 class="admin-title tamil">
          <i class="fas fa-upload"></i>
          புதிய கடவுள் சேர்க்க
        </h3>
        
        <form class="upload-form" id="uploadForm">
          <div class="form-group">
            <label class="form-label tamil">கடவுள் பெயர் *</label>
            <input type="text" class="form-input" id="godName" placeholder="எ.கா: காணியாளய்யன்" required>
          </div>
          
          <div class="form-group">
            <label class="form-label tamil">கடவுள் வகை *</label>
            <select class="form-input" id="godType" required>
              <option value="">தேர்வு செய்க</option>
              <option value="மூலவர்">மூலவர்</option>
              <option value="விநாயகர்">விநாயகர்</option>
              <option value="அம்மன்">அம்மன்</option>
              <option value="முருகன்">முருகன்</option>
              <option value="சிவன்">சிவன்</option>
              <option value="விஷ்ணு">விஷ்ணு</option>
              <option value="நவக்கிரகங்கள்">நவக்கிரகங்கள்</option>
              <option value="துணைத்தெய்வம்">துணைத்தெய்வம்</option>
              <option value="மற்றவை">மற்றவை</option>
            </select>
          </div>
          
          <div class="form-group">
            <label class="form-label tamil">கடவுளின் படம் *</label>
            <div class="file-upload-container">
              <label class="file-upload-label">
                <div class="upload-icon">
                  <i class="fas fa-cloud-upload-alt"></i>
                </div>
                <div class="tamil">கடவுளின் படத்தை இங்கே கிளிக் செய்து தேர்வு செய்க</div>
                <div class="tamil" style="color: #666; margin-top: 5px; font-size: 0.9rem;">
                  (JPG, PNG, GIF மட்டும், அதிகபட்ச அளவு: 100KB)
                </div>
                <input type="file" class="file-input" id="godImage" accept="image/*" required>
              </label>
            </div>
            <div class="preview-container">
              <img id="imagePreview" class="image-preview" alt="Preview">
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label tamil">கடவுளின் விவரங்கள் *</label>
            <textarea class="form-input" id="godDescription" rows="3" placeholder="2-3 வரிகளில் கடவுளின் விவரங்களை எழுதவும்..." required></textarea>
          </div>
          
          <button type="submit" class="upload-btn tamil" id="uploadButton" disabled>
            <i class="fas fa-upload"></i>
            கடவுளை சேர்க்க
          </button>
        </form>
        
        <div class="admin-controls">
          <button class="control-btn tamil" onclick="closeAdminPanel()">
            <i class="fas fa-times"></i>
            மூடு
          </button>
        </div>
      </div>
      
      <!-- Sync Status -->
      <div id="syncStatus" style="text-align: center; margin-bottom: 15px; display: none;">
        <small class="tamil" style="color: #8B0000; font-weight: 500;">
          <i class="fas fa-sync-alt"></i>
          <span id="syncStatusText">தரவு ஒத்திசைக்கப்படுகிறது...</span>
        </small>
      </div>
      
      <!-- Pagination Controls -->
      <div class="pagination-controls" id="paginationControls">
        <button class="page-btn tamil" id="prevPage" disabled>
          <i class="fas fa-chevron-left"></i>
          முந்தையது
        </button>
        
        <span class="page-info tamil" id="pageInfo">பக்கம் 1 / 1</span>
        
        <button class="page-btn tamil" id="nextPage" disabled>
          அடுத்தது
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
      
      <!-- Simple Gods Grid -->
      <div class="simple-gods-grid" id="godsGrid">
        <!-- Gods will be loaded here by JavaScript -->
        <div style="grid-column: 1/-1; text-align: center; padding: 40px;">
          <div class="spinner-border text-danger" role="status">
            <span class="sr-only">ஏற்றுகிறது...</span>
          </div>
          <p class="tamil mt-3">கடவுள்கள் ஏற்றப்படுகின்றன...</p>
        </div>
      </div>
      
      <!-- Pagination Controls (Bottom) -->
      <div class="pagination-controls" id="paginationControlsBottom">
        <button class="page-btn tamil" id="prevPageBottom" disabled>
          <i class="fas fa-chevron-left"></i>
          முந்தையது
        </button>
        
        <span class="page-info tamil" id="pageInfoBottom">பக்கம் 1 / 1</span>
        
        <button class="page-btn tamil" id="nextPageBottom" disabled>
          அடுத்தது
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
      
      <!-- Quick Links -->
      <div class="quick-links-section">
        <h3 class="links-title tamil">தொடர்புடைய பக்கங்கள்</h3>
        
        <div class="quick-links-grid">
          <a href="கோவில் வரலாறு.html" class="quick-link-item tamil">
            <i class="fas fa-history"></i>
            <div>கோவில் வரலாறு</div>
          </a>
          
          <a href="புகைப்பட தொகுப்பு.html" class="quick-link-item tamil">
            <i class="fas fa-images"></i>
            <div>புகைப்பட தொகுப்பு</div>
          </a>
          
          <a href="விஷேசநாட்கள்.html" class="quick-link-item tamil">
            <i class="fas fa-calendar-alt"></i>
            <div>விஷேச நாட்கள்</div>
          </a>
          
          <a href="index.html" class="quick-link-item tamil">
            <i class="fas fa-home"></i>
            <div>முகப்புப் பக்கம்</div>
          </a>
        </div>
      </div>
    </div>
  </main>

  <!-- Simple Modal for God Info -->
  <div id="godModal" class="simple-modal">
    <div class="simple-modal-content">
      <div class="modal-header">
        <h3 class="modal-title tamil" id="modalGodName">கடவுள் பெயர்</h3>
        <button class="close-modal" onclick="closeGodModal()">&times;</button>
      </div>
      <div class="modal-body">
        <p class="tamil" id="modalGodInfo">கடவுளின் விவரங்கள் இங்கே காண்பிக்கப்படும்.</p>
      </div>
      <div class="modal-footer">
        <small class="tamil" style="color: #666;">காணியாளய்யன் திருக்கோவில்</small>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="temple-footer">
    <div class="container">
      <div class="row">
        <div class="col-lg-4 col-md-6 footer-section">
          <h4 class="footer-title tamil">காணியாளய்யன் திருக்கோவில்</h4>
          <p class="tamil">பல நூற்றாண்டுகளாக பக்தர்களுக்கு சேவை செய்து வரும் புனிதத் தலம்.</p>
        </div>
        <div class="col-lg-2 col-md-6 footer-section">
          <h4 class="footer-title tamil">விரைவு இணைப்புகள்</h4>
          <ul class="footer-links">
            <li><a href="index.html" class="tamil"><i class="fas fa-home"></i> முகப்பு பக்கம்</a></li>
            <li><a href="கோவில் வரலாறு.html" class="tamil"><i class="fas fa-history"></i> கோவில் வரலாறு</a></li>
            <li><a href="கடவுள் பெயர்கள்.html" class="tamil"><i class="fas fa-pray"></i> கடவுள் பெயர்கள்</a></li>
            <li><a href="விஷேசநாட்கள்.html" class="tamil"><i class="fas fa-calendar-alt"></i> சிறப்பு நாட்கள்</a></li>
          </ul>
        </div>
        <div class="col-lg-3 col-md-6 footer-section">
          <h4 class="footer-title tamil">திருக்கோவில் நேரங்கள்</h4>
          <ul class="footer-links">
            <li><i class="fas fa-sun"></i> <span class="tamil">காலை தரிசனம்: 6:30 - 12:30</span></li>
            <li><i class="fas fa-moon"></i> <span class="tamil">மாலை தரிசனம்: 4:30 - 8:30</span></li>
          </ul>
        </div>
        <div class="col-lg-3 col-md-6 footer-section">
          <h4 class="footer-title tamil">தொடர்புக்கு</h4>
          <ul class="footer-links">
            <li><i class="fas fa-map-marker-alt"></i> <span class="tamil">பைரவர் கூட்டம், தமிழ்நாடு</span></li>
            <li><i class="fas fa-phone"></i> <span>+91 45678 91234</span></li>
          </ul>
        </div>
      </div>
      <div class="copyright">
        <p class="tamil">© 2024 காணியாளய்யன் திருக்கோவில் (பைரவர் கூட்டம்).</p>
        <p class="tamil" style="font-size: 0.8rem; color: #888;" id="syncInfo"></p>
      </div>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  
  <script>
    // ==================== CONFIGURATION ====================
    // CHANGE THESE VALUES AFTER SETTING UP JSONBIN.IO
    const JSONBIN_CONFIG = { 
      BIN_ID: '693da14e43b1c97be9ebf4d3', // Get this from jsonbin.io
      API_KEY: '$2a$10$rLaXWymVyZOFAW5QpTu7hOF69Wcrr.qj5v0VaYduKKpDu9Cf6K9bi', // Get this from jsonbin.io
      BIN_URL: 'https://api.jsonbin.io/v3/b' // Don't change this
    };
    
    const SECRET_KEY = "2024"; // Admin password
    const SYNC_INTERVAL = 30000; // Sync every 30 seconds (30000ms)
    
    // ==================== GLOBAL VARIABLES ====================
    let isAdmin = false;
    let currentPage = 1;
    const itemsPerPage = 6;
    let godsData = [];
    let lastSyncTime = null;
    let isOnline = navigator.onLine;
    
    // ==================== INITIALIZATION ====================
    document.addEventListener('DOMContentLoaded', function() {
      setupEventListeners();
      checkOnlineStatus();
      loadGods();
      startAutoSync();
      
      // Update sync info in footer
      updateSyncInfo();
    });
    
    // ==================== SETUP EVENT LISTENERS ====================
    function setupEventListeners() {
      // File upload preview
      document.getElementById('godImage').addEventListener('change', handleFileSelect);
      
      // Upload form
      document.getElementById('uploadForm').addEventListener('submit', handleUpload);
      
      // Pagination buttons
      document.getElementById('prevPage').addEventListener('click', () => changePage(-1));
      document.getElementById('nextPage').addEventListener('click', () => changePage(1));
      document.getElementById('prevPageBottom').addEventListener('click', () => changePage(-1));
      document.getElementById('nextPageBottom').addEventListener('click', () => changePage(1));
      
      // Online/offline detection
      window.addEventListener('online', handleOnline);
      window.addEventListener('offline', handleOffline);
    }
    
    // ==================== ONLINE/OFFLINE HANDLING ====================
    function checkOnlineStatus() {
      isOnline = navigator.onLine;
      const statusText = isOnline ? 
        '<i class="fas fa-wifi"></i> ஆன்லைனில்' : 
        '<i class="fas fa-exclamation-triangle"></i> ஆஃப்லைனில்';
      
      document.getElementById('syncInfo').innerHTML = statusText;
    }
    
    function handleOnline() {
      isOnline = true;
      document.getElementById('syncInfo').innerHTML = '<i class="fas fa-wifi"></i> ஆன்லைனில் - தரவு ஒத்திசைக்கப்படுகிறது';
      
      // Sync when coming back online
      setTimeout(syncWithCloud, 2000);
    }
    
    function handleOffline() {
      isOnline = false;
      document.getElementById('syncInfo').innerHTML = '<i class="fas fa-exclamation-triangle"></i> ஆஃப்லைனில் - உள்ளூர் தரவு காட்டப்படுகிறது';
    }
    
    // ==================== LOAD GODS ====================
    async function loadGods() {
      showSyncStatus('தரவு ஏற்றப்படுகிறது...');
      
      try {
        // Try to load from cloud first
        if (isOnline) {
          const cloudData = await loadFromCloud();
          
          if (cloudData && cloudData.length > 0) {
            godsData = cloudData;
            // Save to localStorage for offline use
            localStorage.setItem('templeGods', JSON.stringify(godsData));
            lastSyncTime = new Date();
            showSyncStatus('தரவு ஒத்திசைக்கப்பட்டது', 'success');
          } else {
            // Fallback to localStorage if cloud is empty
            godsData = JSON.parse(localStorage.getItem('templeGods')) || [];
            showSyncStatus('உள்ளூர் தரவு பயன்படுத்தப்படுகிறது', 'warning');
          }
        } else {
          // Offline: Use localStorage
          godsData = JSON.parse(localStorage.getItem('templeGods')) || [];
          showSyncStatus('ஆஃப்லைனில் - உள்ளூர் தரவு', 'warning');
        }
      } catch (error) {
        console.error('Error loading data:', error);
        godsData = JSON.parse(localStorage.getItem('templeGods')) || [];
        showSyncStatus('பிழை - உள்ளூர் தரவு', 'error');
      }
      
      // Load default data if empty
      if (godsData.length === 0) {
        godsData = getDefaultGods();
        localStorage.setItem('templeGods', JSON.stringify(godsData));
      }
      
      renderGodsGrid();
      updatePagination();
      updateSyncInfo();
      
      // Hide status after 3 seconds
      setTimeout(() => {
        hideSyncStatus();
      }, 3000);
    }
    
    function getDefaultGods() {
      return [
        {
          id: 1,
          name: "காணியாளய்யன்",
          type: "மூலவர் • விநாயகர்",
          image: "24k1.jpg",
          info: "இக்கோவிலின் மூலவர். விநாயகர் அம்சத்தில் எழுந்தருளியுள்ளார். பக்தர்களின் தடைகளை நீக்கி வெற்றியை அளிக்கிறார்."
        },
        {
          id: 2,
          name: "அருள்மிகு அம்மன்",
          type: "சக்தி தெய்வம்",
          image: "24k2.jpg",
          info: "சக்தி தெய்வமாக எழுந்தருளியுள்ளார். பக்தர்களுக்கு ஆரோக்கியம், செல்வம் மற்றும் குடும்ப சாந்தியை அருள்பவர்."
        },
        {
          id: 3,
          name: "சுப்பிரமணியன்",
          type: "முருகப்பெருமான்",
          image: "24k3.jpg",
          info: "முருகப்பெருமான் கல்வி மற்றும் அறிவுக்கு தெய்வம். மாணவர்கள் வணங்கி கல்வி வெற்றி பெறுகிறார்கள்."
        },
        {
          id: 4,
          name: "பிரம்மபுரீஸ்வரர்",
          type: "சிவபெருமான்",
          image: "24k10.jpg",
          info: "சிவபெருமான் லிங்க வடிவில் எழுந்தருளியுள்ளார். பக்தர்களின் பாவங்களை நீக்கி முக்தியை அளிப்பவர்."
        },
        {
          id: 5,
          name: "ரங்கநாதர்",
          type: "மகாவிஷ்ணு",
          image: "24k11.jpg",
          info: "மகாவிஷ்ணு பரந்தாமன் எனும் பெயரில் எழுந்தருளியுள்ளார். உலகைப் பாதுகாக்கும் கடவுளாக வணங்கப்படுகிறார்."
        },
        {
          id: 6,
          name: "நவக்கிரகங்கள்",
          type: "ஒன்பது கோள்கள்",
          image: "24k12.jpg",
          info: "சூரியன், சந்திரன், செவ்வாய், புதன், வியாழன், வெள்ளி, சனி, ராகு, கேது ஆகிய ஒன்பது கிரகங்கள்."
        }
      ];
    }
    
    // ==================== RENDER GODS GRID ====================
    function renderGodsGrid() {
      const grid = document.getElementById('godsGrid');
      const startIndex = (currentPage - 1) * itemsPerPage;
      const endIndex = startIndex + itemsPerPage;
      const currentGods = godsData.slice(startIndex, endIndex);
      
      grid.innerHTML = '';
      
      if (currentGods.length === 0) {
        grid.innerHTML = `
          <div style="grid-column: 1/-1; text-align: center; padding: 40px;">
            <i class="fas fa-pray" style="font-size: 3rem; color: #8B0000; margin-bottom: 15px;"></i>
            <h3 class="tamil" style="color: #8B0000;">கடவுள்கள் இல்லை</h3>
            <p class="tamil" style="color: #666;">கடவுள்கள் இன்னும் சேர்க்கப்படவில்லை.</p>
            <button class="info-btn tamil mt-3" onclick="showSecretInput()">
              முதல் கடவுளை சேர்க்க
            </button>
          </div>
        `;
        return;
      }
      
      currentGods.forEach(god => {
        const godCard = document.createElement('div');
        godCard.className = 'simple-god-card';
        godCard.onclick = () => showGodInfo(god.id);
        
        godCard.innerHTML = `
          <div class="delete-overlay" style="${isAdmin ? 'display: block;' : 'display: none;'}">
            <button class="delete-btn" onclick="event.stopPropagation(); deleteGod(${god.id})">
              <i class="fas fa-trash"></i>
            </button>
          </div>
          <img src="${god.image}" alt="${god.name}" class="god-image-simple" onerror="this.src='https://via.placeholder.com/300x200?text=கடவுளின்+படம்'">
          <div class="god-info-simple">
            <h3 class="god-name-simple tamil">${god.name}</h3>
            <p class="god-type-simple tamil">${god.type}</p>
            <button class="info-btn tamil" onclick="event.stopPropagation(); showGodInfo(${god.id})">
              விவரங்கள்
            </button>
          </div>
        `;
        
        grid.appendChild(godCard);
      });
    }
    
    // ==================== ADMIN FUNCTIONS ====================
    function showSecretInput() {
      document.getElementById('secretInputContainer').style.display = 'block';
    }
    
    function checkSecretKey() {
      const input = document.getElementById('secretKey').value;
      
      if (input === SECRET_KEY) {
        isAdmin = true;
        document.getElementById('adminPanel').style.display = 'block';
        document.getElementById('secretLogin').style.display = 'none';
        renderGodsGrid(); // Reload to show delete buttons
      } else {
        alert('தவறான குறி! தயவு செய்து சரியான குறியை உள்ளிடுக.');
      }
    }
    
    function closeAdminPanel() {
      isAdmin = false;
      document.getElementById('adminPanel').style.display = 'none';
      document.getElementById('secretLogin').style.display = 'block';
      document.getElementById('secretInputContainer').style.display = 'none';
      document.getElementById('secretKey').value = '';
      renderGodsGrid(); // Reload to hide delete buttons
    }
   function handleFileSelect(event) {
  const file = event.target.files[0];
  const preview = document.getElementById('imagePreview');
  const uploadBtn = document.getElementById('uploadButton');
  
  if (!file) {
    if (preview) preview.style.display = 'none';
    if (uploadBtn) uploadBtn.disabled = true;
    return;
  }
  
  // Check file type
  if (!file.type.match('image.*')) {
    alert('படங்கள் மட்டுமே (JPG, PNG, GIF) அனுமதிக்கப்படுகின்றன!');
    event.target.value = '';
    if (preview) preview.style.display = 'none';
    if (uploadBtn) uploadBtn.disabled = true;
    return;
  }
  
  // Check file size (10MB limit)
  if (file.size > 10 * 1024 * 1024) {
    alert('படம் மிகப் பெரியது! அதிகபட்ச அளவு: 10MB');
    event.target.value = '';
    if (preview) preview.style.display = 'none';
    if (uploadBtn) uploadBtn.disabled = true;
    return;
  }
  
  // Create preview
  const reader = new FileReader();
  reader.onload = function(e) {
    if (preview) {
      preview.src = e.target.result;
      preview.style.display = 'block';
    }
  };
  
  reader.onerror = function() {
    alert('படத்தை படிக்க முடியவில்லை!');
    if (preview) preview.style.display = 'none';
    if (uploadBtn) uploadBtn.disabled = true;
  };
  
  reader.readAsDataURL(file);
  
  if (uploadBtn) uploadBtn.disabled = false;
}
  async function handleUpload(e) {
  e.preventDefault();
  
  const name = document.getElementById('godName').value.trim();
  const type = document.getElementById('godType').value;
  const description = document.getElementById('godDescription').value.trim();
  const fileInput = document.getElementById('godImage');
  const file = fileInput.files[0];
  
  if (!name || !type || !description || !file) {
    alert('தயவு செய்து அனைத்து தேவையான விவரங்களையும் பூர்த்தி செய்யவும்.');
    return;
  }
  
  // Show loading
  const uploadBtn = document.getElementById('uploadButton');
  const originalBtnText = uploadBtn.innerHTML;
  uploadBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> சேமிக்கிறது...';
  uploadBtn.disabled = true;
  
  try {
    // Compress image if needed (for large files)
    let finalImage;
    if (file.size > 500 * 1024) { // >500KB
      console.log('Compressing large image...');
      finalImage = await compressImage(file, 800, 0.7);
    } else {
      // Use original for small files
      const reader = new FileReader();
      finalImage = await new Promise((resolve, reject) => {
        reader.onload = (e) => resolve(e.target.result);
        reader.onerror = reject;
        reader.readAsDataURL(file);
      });
    }
    
    // Create new god object
    const newGod = {
      id: godsData.length > 0 ? Math.max(...godsData.map(g => g.id)) + 1 : 1,
      name: name,
      type: type,
      image: finalImage,
      info: description,
      added: new Date().toISOString()
    };
    
    // Save to localStorage
    godsData.push(newGod);
    localStorage.setItem('templeGods', JSON.stringify(godsData));
    
    // Save to cloud
    let cloudSaved = false;
    if (isOnline) {
      try {
        await saveToCloud(godsData);
        cloudSaved = true;
      } catch (error) {
        console.error('Cloud save failed:', error);
      }
    }
    
    // Reset form
    document.getElementById('uploadForm').reset();
    document.getElementById('imagePreview').style.display = 'none';
    
    // Update display
    const totalPages = Math.ceil(godsData.length / itemsPerPage);
    currentPage = totalPages;
    renderGodsGrid();
    updatePagination();
    
    // Show message
    if (cloudSaved) {
      alert('✅ கடவுள் வெற்றிகரமாக சேர்க்கப்பட்டது!');
    } else {
      alert('✅ கடவுள் சேர்க்கப்பட்டது');
    }
    
  } catch (error) {
    console.error('Upload error:', error);
    alert('பிழை: ' + error.message);
  } finally {
    // Reset button
    uploadBtn.innerHTML = originalBtnText;
    uploadBtn.disabled = false;
  }
}
function resetUploadForm() {
  document.getElementById('uploadForm').reset();
  document.getElementById('imagePreview').style.display = 'none';
  document.getElementById('uploadButton').disabled = true;
}
  // ==================== IMAGE COMPRESSION ====================
function compressImage(file, maxWidth = 800, quality = 0.7) {
  return new Promise((resolve, reject) => {
    console.log('Original file size:', (file.size / 1024).toFixed(2), 'KB');
    
    // For very small files, no need to compress
    if (file.size < 100 * 1024) { // Less than 100KB
      const reader = new FileReader();
      reader.onload = (e) => resolve(e.target.result);
      reader.onerror = reject;
      reader.readAsDataURL(file);
      return;
    }
    
    const reader = new FileReader();
    reader.onload = function(e) {
      const img = new Image();
      img.onload = function() {
        const canvas = document.createElement('canvas');
        
        // Calculate new dimensions maintaining aspect ratio
        let width = img.width;
        let height = img.height;
        
        if (width > maxWidth) {
          height = Math.round((height * maxWidth) / width);
          width = maxWidth;
        }
        
        canvas.width = width;
        canvas.height = height;
        
        // Draw image on canvas
        const ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0, width, height);
        
        // Convert to compressed JPEG
        const compressedBase64 = canvas.toDataURL('image/jpeg', quality);
        
        console.log('Compressed size:', 
          Math.round(compressedBase64.length * 3 / 4 / 1024), 
          'KB (approx)');
        console.log('Reduction:', 
          ((1 - (compressedBase64.length * 3 / 4) / file.size) * 100).toFixed(1), 
          '%');
        
        resolve(compressedBase64);
      };
      img.onerror = reject;
      img.src = e.target.result;
    };
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}


    async function deleteGod(godId) {
      if (!confirm('இந்த கடவுளை நீக்க விரும்புகிறீர்களா?')) {
        return;
      }
      
      // Remove from array
      godsData = godsData.filter(god => god.id !== godId);
      
      // Save to localStorage
      localStorage.setItem('templeGods', JSON.stringify(godsData));
      
      // Try to save to cloud
      if (isOnline) {
        try {
          await saveToCloud(godsData);
        } catch (error) {
          console.error('Cloud delete failed:', error);
        }
      }
      
      // Recalculate current page
      const totalPages = Math.ceil(godsData.length / itemsPerPage);
      if (currentPage > totalPages && totalPages > 0) {
        currentPage = totalPages;
      } else if (totalPages === 0) {
        currentPage = 1;
      }
      
      // Reload
      renderGodsGrid();
      updatePagination();
      
      alert('கடவுள் நீக்கப்பட்டது!');
    }
     
    // ==================== JSONBIN.IO FUNCTIONS ====================
   async function loadFromCloud() {
  try {
    const response = await fetch(`${JSONBIN_CONFIG.BIN_URL}/${JSONBIN_CONFIG.BIN_ID}/latest`, {
      headers: {
        'X-Master-Key': JSONBIN_CONFIG.API_KEY
      }
    });
    
    if (!response.ok) {
      throw new Error(`HTTP ${response.status}`);
    }
    
    const data = await response.json();
    return data.record || [];
  } catch (error) {
    console.error('Error loading from cloud:', error);
    return null;
  }
}
   async function saveToCloud(data) {
  try {
    const response = await fetch(`${JSONBIN_CONFIG.BIN_URL}/${JSONBIN_CONFIG.BIN_ID}`, {
      method: 'PUT',
      headers: {
        'Content-Type': 'application/json',
        'X-Master-Key': JSONBIN_CONFIG.API_KEY
      },
      body: JSON.stringify(data)
    });
    
    if (!response.ok) {
      throw new Error(`HTTP ${response.status}`);
    }
    
    lastSyncTime = new Date();
    return true;
  } catch (error) {
    console.error('Error saving to cloud:', error);
    return false;
  }
}
    // ==================== SYNC FUNCTIONS ====================
    async function syncWithCloud() {
      if (!isOnline) return;
      
      showSyncStatus('தரவு ஒத்திசைக்கப்படுகிறது...');
      
      try {
        const cloudData = await loadFromCloud();
        const localData = JSON.parse(localStorage.getItem('templeGods')) || [];
        
        if (!cloudData || cloudData.length === 0) {
          // Cloud is empty, upload our local data
          if (localData.length > 0) {
            await saveToCloud(localData);
            showSyncStatus('தரவு பதிவேற்றப்பட்டது', 'success');
          }
          return;
        }
        
        // Merge cloud and local data
        const merged = [...localData, ...cloudData];
        
        // Remove duplicates based on ID
        const uniqueMap = new Map();
        merged.forEach(item => {
          if (!uniqueMap.has(item.id) || 
              (item.added && uniqueMap.get(item.id).added && 
               new Date(item.added) > new Date(uniqueMap.get(item.id).added))) {
            uniqueMap.set(item.id, item);
          }
        });
        
        const uniqueData = Array.from(uniqueMap.values());
        
        // Update if different
        if (JSON.stringify(uniqueData) !== JSON.stringify(godsData)) {
          godsData = uniqueData;
          localStorage.setItem('templeGods', JSON.stringify(godsData));
          
          // Save merged data back to cloud
          await saveToCloud(uniqueData);
          
          renderGodsGrid();
          updatePagination();
          showSyncStatus('தரவு ஒத்திசைக்கப்பட்டது', 'success');
        } else {
          showSyncStatus('தரவு மேம்படுத்தப்பட்டது', 'info');
        }
        
        lastSyncTime = new Date();
      } catch (error) {
        console.error('Sync error:', error);
        showSyncStatus('ஒத்திசைவு தோல்வி', 'error');
      }
      
      updateSyncInfo();
      
      // Hide status after 3 seconds
      setTimeout(() => {
        hideSyncStatus();
      }, 3000);
    }
    
    function startAutoSync() {
      // Sync immediately on load
      setTimeout(syncWithCloud, 2000);
      
      // Then sync every 30 seconds
      setInterval(syncWithCloud, SYNC_INTERVAL);
    }
    
    function showSyncStatus(message, type = 'info') {
      const statusEl = document.getElementById('syncStatus');
      const textEl = document.getElementById('syncStatusText');
      
      if (!statusEl || !textEl) return;
      
      textEl.innerHTML = message;
      statusEl.style.display = 'block';
      
      // Set color based on type
      if (type === 'success') {
        textEl.style.color = '#28a745';
      } else if (type === 'warning') {
        textEl.style.color = '#ffc107';
      } else if (type === 'error') {
        textEl.style.color = '#dc3545';
      } else {
        textEl.style.color = '#8B0000';
      }
    }
    
    function hideSyncStatus() {
      const statusEl = document.getElementById('syncStatus');
      if (statusEl) {
        statusEl.style.display = 'none';
      }
    }
    
    function updateSyncInfo() {
      const syncInfoEl = document.getElementById('syncInfo');
      if (!syncInfoEl) return;
      
      let statusText = '';
      
      if (!isOnline) {
        statusText = '<i class="fas fa-exclamation-triangle"></i> ஆஃப்லைனில்';
      } else if (lastSyncTime) {
        const timeAgo = Math.floor((new Date() - lastSyncTime) / 1000);
        const minutes = Math.floor(timeAgo / 60);
        
        if (minutes < 1) {
          statusText = `<i class="fas fa-check-circle"></i> இணைப்பு செய்யப்பட்டது`;
        } else if (minutes < 60) {
          statusText = `<i class="fas fa-sync-alt"></i> ${minutes} நிமிடங்களுக்கு முன் ஒத்திசைக்கப்பட்டது`;
        } else {
          const hours = Math.floor(minutes / 60);
          statusText = `<i class="fas fa-sync-alt"></i> ${hours} மணி நேரத்திற்கு முன் ஒத்திசைக்கப்பட்டது`;
        }
      } else {
        statusText = `<i class="fas fa-sync-alt"></i> ஒத்திசைக்கப்படுகிறது...`;
      }
      
      syncInfoEl.innerHTML = `${statusText} • ${godsData.length} கடவுள்கள்`;
    }
    
    // ==================== MODAL FUNCTIONS ====================
    function showGodInfo(godId) {
      const god = godsData.find(g => g.id === godId);
      if (!god) return;
      
      document.getElementById('modalGodName').textContent = god.name;
      document.getElementById('modalGodInfo').textContent = god.info;
      document.getElementById('godModal').style.display = 'block';
    }
    
    function closeGodModal() {
      document.getElementById('godModal').style.display = 'none';
    }
    
    // ==================== PAGINATION FUNCTIONS ====================
    function changePage(direction) {
      const totalPages = Math.ceil(godsData.length / itemsPerPage);
      currentPage += direction;
      
      if (currentPage < 1) currentPage = 1;
      if (currentPage > totalPages) currentPage = totalPages;
      
      renderGodsGrid();
      updatePagination();
      
      // Scroll to top of grid
      document.getElementById('godsGrid').scrollIntoView({ behavior: 'smooth' });
    }
    
    function updatePagination() {
      const totalPages = Math.ceil(godsData.length / itemsPerPage);
      
      // Update page info
      document.getElementById('pageInfo').textContent = `பக்கம் ${currentPage} / ${totalPages}`;
      document.getElementById('pageInfoBottom').textContent = `பக்கம் ${currentPage} / ${totalPages}`;
      
      // Update button states
      document.getElementById('prevPage').disabled = currentPage === 1;
      document.getElementById('nextPage').disabled = currentPage === totalPages || totalPages === 0;
      document.getElementById('prevPageBottom').disabled = currentPage === 1;
      document.getElementById('nextPageBottom').disabled = currentPage === totalPages || totalPages === 0;
      
      // Show/hide pagination if only one page
      const showPagination = totalPages > 1;
      document.getElementById('paginationControls').style.display = showPagination ? 'flex' : 'none';
      document.getElementById('paginationControlsBottom').style.display = showPagination ? 'flex' : 'none';
    }
    
    // ==================== EVENT LISTENERS ====================
    window.onclick = function(event) {
      const modal = document.getElementById('godModal');
      if (event.target === modal) {
        closeGodModal();
      }
    };
    
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') {
        closeGodModal();
      }
    });
    
    // ==================== MANUAL SYNC FUNCTION ====================
    // You can call this from browser console if needed
    window.manualSync = syncWithCloud;
    
    // ==================== RESET FUNCTION ====================
    // Use carefully - resets to default data
    window.resetGodsData = function() {
      if (confirm('இது அனைத்து கடவுள்களையும் நீக்கி தொடக்க தரவுகளுக்கு மீட்டமைக்கும். தொடர விரும்புகிறீர்களா?')) {
        godsData = getDefaultGods();
        localStorage.setItem('templeGods', JSON.stringify(godsData));
        
        if (isOnline) {
          saveToCloud(godsData);
        }
        
        currentPage = 1;
        renderGodsGrid();
        updatePagination();
        alert('தரவு மீட்டமைக்கப்பட்டது!');
      }
    };
  </script>
</body>
</html>
